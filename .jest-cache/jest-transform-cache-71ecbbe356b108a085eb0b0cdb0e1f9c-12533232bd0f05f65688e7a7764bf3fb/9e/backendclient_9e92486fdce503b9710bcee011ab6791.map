{"version":3,"names":["cov_2aqs11jo7w","actualCoverage","http","s","require","BACKEND_HOST","b","process","env","BACKEND_PORT","parseInt","BACKEND_TIMEOUT","MAX_RETRIES","BACKEND_MAX_RETRIES","INITIAL_BACKOFF_MS","ENABLE_BACKEND_PERSISTENCE","makeRequest","options","data","timeout","f","Promise","resolve","reject","req","request","res","body","on","chunk","statusCode","JSON","parse","error","Error","setTimeout","destroy","write","stringify","end","callBackendAPI","endpoint","console","log","success","reason","method","retries","undefined","requestOptions","hostname","port","path","headers","lastError","attempt","result","backoffMs","Math","pow","warn","message","ingestEvent","eventData","ingestEventBatch","events","updateSession","sessionId","sessionData","getSessionSummary","healthCheck","testConnection","getConfig","host","maxRetries","initialBackoffMs","persistenceEnabled","module","exports","main","connected","testEvent","event_type","agent_id","timestamp","Date","toISOString","metadata","test","source","exit"],"sources":["backend-client.cjs"],"sourcesContent":["\r\n/**\r\n * Unified Backend Client for Hook Integration\r\n * Provides consistent API calling with retry logic, timeouts, and graceful degradation\r\n *\r\n * Phase 2: Context Preservation Infrastructure\r\n * Used by all hooks to send events to backend for database persistence\r\n */\r\n\r\nconst http = require('http');\r\n\r\n// Configuration from environment or defaults\r\nconst BACKEND_HOST = process.env.BACKEND_HOST || 'localhost';\r\nconst BACKEND_PORT = parseInt(process.env.BACKEND_PORT || '8000', 10);\r\nconst BACKEND_TIMEOUT = parseInt(process.env.BACKEND_TIMEOUT || '5000', 10);\r\nconst MAX_RETRIES = parseInt(process.env.BACKEND_MAX_RETRIES || '3', 10);\r\nconst INITIAL_BACKOFF_MS = 1000;\r\nconst ENABLE_BACKEND_PERSISTENCE = process.env.ENABLE_BACKEND_PERSISTENCE !== 'false'; // Default: enabled\r\n\r\n/**\r\n * Make HTTP request to backend\r\n */\r\nfunction makeRequest(options, data, timeout = BACKEND_TIMEOUT) {\r\n  return new Promise((resolve, reject) => {\r\n    const req = http.request(options, (res) => {\r\n      let body = '';\r\n      res.on('data', (chunk) => body += chunk);\r\n      res.on('end', () => {\r\n        if (res.statusCode >= 200 && res.statusCode < 300) {\r\n          try {\r\n            resolve({\r\n              statusCode: res.statusCode,\r\n              body: body ? JSON.parse(body) : null\r\n            });\r\n          } catch (error) {\r\n            resolve({\r\n              statusCode: res.statusCode,\r\n              body: body\r\n            });\r\n          }\r\n        } else {\r\n          reject(new Error(`HTTP ${res.statusCode}: ${body}`));\r\n        }\r\n      });\r\n    });\r\n\r\n    req.on('error', reject);\r\n    req.setTimeout(timeout, () => {\r\n      req.destroy();\r\n      reject(new Error('Request timeout'));\r\n    });\r\n\r\n    if (data) {\r\n      req.write(typeof data === 'string' ? data : JSON.stringify(data));\r\n    }\r\n    req.end();\r\n  });\r\n}\r\n\r\n/**\r\n * Call backend API with retry logic and exponential backoff\r\n */\r\nasync function callBackendAPI(endpoint, data, options = {}) {\r\n  // Check if backend persistence is disabled\r\n  if (!ENABLE_BACKEND_PERSISTENCE) {\r\n    console.log('[Backend] Persistence disabled via ENABLE_BACKEND_PERSISTENCE=false');\r\n    return { success: false, reason: 'disabled', data: null };\r\n  }\r\n\r\n  const method = options.method || 'POST';\r\n  const timeout = options.timeout || BACKEND_TIMEOUT;\r\n  const retries = options.retries !== undefined ? options.retries : MAX_RETRIES;\r\n\r\n  const requestOptions = {\r\n    hostname: BACKEND_HOST,\r\n    port: BACKEND_PORT,\r\n    path: endpoint,\r\n    method: method,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...(options.headers || {})\r\n    }\r\n  };\r\n\r\n  let lastError = null;\r\n\r\n  for (let attempt = 1; attempt <= retries + 1; attempt++) {\r\n    try {\r\n      const result = await makeRequest(requestOptions, data, timeout);\r\n\r\n      if (attempt > 1) {\r\n        console.log(`[Backend] Success on attempt ${attempt} for ${endpoint}`);\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        statusCode: result.statusCode,\r\n        data: result.body,\r\n        attempt: attempt\r\n      };\r\n\r\n    } catch (error) {\r\n      lastError = error;\r\n\r\n      if (attempt <= retries) {\r\n        const backoffMs = INITIAL_BACKOFF_MS * Math.pow(2, attempt - 1);\r\n        console.warn(`[Backend] Attempt ${attempt}/${retries + 1} failed for ${endpoint}: ${error.message}`);\r\n        console.warn(`[Backend] Retrying in ${backoffMs}ms...`);\r\n        await new Promise(resolve => setTimeout(resolve, backoffMs));\r\n      }\r\n    }\r\n  }\r\n\r\n  // All retries exhausted\r\n  console.error(`[Backend] All ${retries + 1} attempts failed for ${endpoint}`);\r\n  console.error(`[Backend] Final error: ${lastError.message}`);\r\n\r\n  return {\r\n    success: false,\r\n    error: lastError.message,\r\n    attempt: retries + 1\r\n  };\r\n}\r\n\r\n/**\r\n * Ingest event to backend (POST /api/v1/events/ingest)\r\n */\r\nasync function ingestEvent(eventData) {\r\n  return callBackendAPI('/api/v1/events/ingest', eventData);\r\n}\r\n\r\n/**\r\n * Send batch of events to backend\r\n */\r\nasync function ingestEventBatch(events) {\r\n  return callBackendAPI('/api/v1/events/ingest/batch', { events });\r\n}\r\n\r\n/**\r\n * Update session in backend (POST /api/v1/sessions/{session_id})\r\n */\r\nasync function updateSession(sessionId, sessionData) {\r\n  return callBackendAPI(`/api/v1/sessions/${sessionId}`, sessionData, { method: 'POST' });\r\n}\r\n\r\n/**\r\n * Get session summary from backend\r\n */\r\nasync function getSessionSummary(sessionId) {\r\n  return callBackendAPI(`/api/v1/sessions/${sessionId}`, null, { method: 'GET' });\r\n}\r\n\r\n/**\r\n * Health check - verify backend is reachable\r\n */\r\nasync function healthCheck() {\r\n  return callBackendAPI('/health', null, {\r\n    method: 'GET',\r\n    timeout: 2000,\r\n    retries: 0\r\n  });\r\n}\r\n\r\n/**\r\n * Test connectivity and log result\r\n */\r\nasync function testConnection() {\r\n  console.log(`[Backend] Testing connection to ${BACKEND_HOST}:${BACKEND_PORT}...`);\r\n  const result = await healthCheck();\r\n\r\n  if (result.success) {\r\n    console.log('[Backend] Connection successful');\r\n    return true;\r\n  } else {\r\n    console.warn('[Backend] Connection failed:', result.error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Get backend configuration\r\n */\r\nfunction getConfig() {\r\n  return {\r\n    host: BACKEND_HOST,\r\n    port: BACKEND_PORT,\r\n    timeout: BACKEND_TIMEOUT,\r\n    maxRetries: MAX_RETRIES,\r\n    initialBackoffMs: INITIAL_BACKOFF_MS,\r\n    persistenceEnabled: ENABLE_BACKEND_PERSISTENCE\r\n  };\r\n}\r\n\r\nmodule.exports = {\r\n  callBackendAPI,\r\n  ingestEvent,\r\n  ingestEventBatch,\r\n  updateSession,\r\n  getSessionSummary,\r\n  healthCheck,\r\n  testConnection,\r\n  getConfig\r\n};\r\n\r\n// CLI test interface\r\nif (require.main === module) {\r\n  (async () => {\r\n    console.log('Backend Client Configuration:');\r\n    console.log(JSON.stringify(getConfig(), null, 2));\r\n    console.log();\r\n\r\n    // Test connection\r\n    const connected = await testConnection();\r\n\r\n    if (connected) {\r\n      console.log('\\nTesting event ingestion...');\r\n      const testEvent = {\r\n        event_type: 'test',\r\n        agent_id: 'backend-client-test',\r\n        timestamp: new Date().toISOString(),\r\n        metadata: {\r\n          test: true,\r\n          source: 'backend-client.js'\r\n        }\r\n      };\r\n\r\n      const result = await ingestEvent(testEvent);\r\n      console.log('Ingestion result:', JSON.stringify(result, null, 2));\r\n\r\n      process.exit(result.success ? 0 : 1);\r\n    } else {\r\n      console.error('\\nBackend unreachable - events will be logged to files only');\r\n      process.exit(1);\r\n    }\r\n  })();\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}