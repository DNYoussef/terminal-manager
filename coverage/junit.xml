<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="263" failures="169" errors="0" time="2.769">
  <testsuite name="Pre-Task Hook" errors="0" failures="10" skipped="0" timestamp="2025-11-19T23:46:16" time="0.553" tests="35">
    <testcase classname="Pre-Task Hook &gt; Agent Auto-Assignment" name="should assign researcher agent for research tasks" time="0.048">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Agent Auto-Assignment" name="should assign coder agent for code/implement tasks" time="0.011">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Agent Auto-Assignment" name="should assign tester agent for test/validate tasks" time="0.009">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Agent Auto-Assignment" name="should assign reviewer agent for review/audit tasks" time="0.012">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;reviewer&quot;
Received: &quot;coder&quot;
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task.test.js:157:29)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Agent Auto-Assignment" name="should assign system-architect for design tasks" time="0.008">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Agent Auto-Assignment" name="should assign planner agent for planning tasks" time="0.01">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Agent Auto-Assignment" name="should fall back to coder for unknown task types" time="0.008">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Agent Auto-Assignment" name="should use provided agentType over auto-assignment" time="0.007">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Agent Auto-Assignment" name="should handle empty description gracefully" time="0.007">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Budget Validation" name="should allow task when budget is sufficient" time="0.01">
      <failure>Error: expect(jest.fn()).toHaveBeenCalled()

Expected number of calls: &gt;= 1
Received number of calls:    0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task.test.js:241:45)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Budget Validation" name="should block task when budget is exceeded" time="0.009">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task.test.js:259:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Budget Validation" name="should log budget check results" time="0.011">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Budget check passed&quot;, ObjectContaining {&quot;remaining_tokens&quot;: Any&lt;Number&gt;}

Number of calls: 0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task.test.js:272:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Budget Validation" name="should use default estimates when not provided" time="0.008">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: Any&lt;String&gt;, ObjectContaining {&quot;estimatedCost&quot;: 0.01, &quot;estimatedTokens&quot;: 10000}

Number of calls: 0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task.test.js:287:45)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Correlation ID Management" name="should generate correlation ID for task" time="0.008">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Correlation ID Management" name="should generate taskId if not provided" time="0.009">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Correlation ID Management" name="should include correlation ID in logs" time="0.008">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Pre-task hook started&quot;, ObjectContaining {&quot;trace_id&quot;: StringMatching /^correlation-/}

Number of calls: 0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task.test.js:332:31)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook &gt; OpenTelemetry Integration" name="should start span for pre-task hook" time="0.01">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;pre-task-hook&quot;, ObjectContaining {&quot;attributes&quot;: ObjectContaining {&quot;hook.type&quot;: &quot;pre-task&quot;, &quot;task.id&quot;: &quot;task-789&quot;}}

Number of calls: 0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task.test.js:350:41)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook &gt; OpenTelemetry Integration" name="should set span attributes with task details" time="0.008">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;pre-task-hook&quot;, ObjectContaining {&quot;attributes&quot;: ObjectContaining {&quot;hook.type&quot;: &quot;pre-task&quot;}}

Number of calls: 0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task.test.js:370:41)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook &gt; OpenTelemetry Integration" name="should add budget attributes to span" time="0.008">
      <failure>Error: expect(jest.fn()).toHaveBeenCalled()

Expected number of calls: &gt;= 1
Received number of calls:    0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task.test.js:394:41)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook &gt; OpenTelemetry Integration" name="should mark span as blocked when budget exceeded" time="0.007">
      <failure>Error: expect(jest.fn()).toHaveBeenCalled()

Expected number of calls: &gt;= 1
Received number of calls:    0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task.test.js:412:41)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Memory MCP Integration" name="should store task start event in Memory MCP" time="0.008">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Memory MCP Integration" name="should detect project from context" time="0.007">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Memory MCP Integration" name="should include correlation IDs in memory data" time="0.007">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Backend API Integration" name="should call backend API with task info" time="0.008">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Backend API Integration" name="should continue gracefully if backend unavailable" time="0.007">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Backend API Integration" name="should use environment variable for backend URL" time="0.007">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Error Handling" name="should handle missing context gracefully" time="0.007">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Error Handling" name="should handle null context" time="0.007">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Error Handling" name="should handle memory store failure" time="0.02">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Error Handling" name="should log errors without crashing" time="0.008">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Task Context Handling" name="should handle full context with all fields" time="0.007">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Task Context Handling" name="should generate defaults for missing fields" time="0.007">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Return Value Structure" name="should return success object with all required fields" time="0.007">
    </testcase>
    <testcase classname="Pre-Task Hook &gt; Return Value Structure" name="should return blocked object when budget exceeded" time="0.007">
    </testcase>
    <testcase classname="Coverage Summary" name="Pre-Task Hook Test Coverage" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Post-Task Hook" errors="0" failures="21" skipped="0" timestamp="2025-11-19T23:46:17" time="0.215" tests="26">
    <testcase classname="Post-Task Hook &gt; Correlation ID Continuity" name="should retrieve pre-task correlation ID for continuity" time="0.018">
    </testcase>
    <testcase classname="Post-Task Hook &gt; Correlation ID Continuity" name="should create new correlation ID if pre-task missing" time="0.016">
    </testcase>
    <testcase classname="Post-Task Hook &gt; Correlation ID Continuity" name="should propagate correlation ID to next task if provided" time="0.002">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;post-task-hook&quot;, &quot;pre-task-task-004&quot;

Number of calls: 0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:201:48)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Correlation ID Continuity" name="should not propagate if no nextTaskId provided" time="0.001">
    </testcase>
    <testcase classname="Post-Task Hook &gt; Task Result Processing" name="should process successful task completion" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:237:30)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Task Result Processing" name="should process failed task with error" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:265:30)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Task Result Processing" name="should handle unknown task status" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:285:30)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Task Result Processing" name="should validate and sanitize input context" time="0.001">
    </testcase>
    <testcase classname="Post-Task Hook &gt; Memory MCP Storage" name="should store task results with tagging protocol" time="0.001">
      <failure>Error: expect(jest.fn()).toHaveBeenCalled()

Expected number of calls: &gt;= 1
Received number of calls:    0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:324:52)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Memory MCP Storage" name="should use correct WHO/WHEN/PROJECT/WHY metadata" time="0.001">
      <failure>TypeError: undefined is not iterable (cannot read property Symbol(Symbol.iterator))
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:355:39)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Memory MCP Storage" name="should handle missing memoryStore gracefully" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:378:30)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Backend Event Ingestion" name="should send task completion event to backend API" time="0.002">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: ArrayContaining [ObjectContaining {&quot;agent_id&quot;: &quot;agent-004&quot;, &quot;agent_type&quot;: &quot;frontend-dev&quot;, &quot;event_type&quot;: &quot;task-completed&quot;, &quot;intent&quot;: &quot;implementation&quot;, &quot;project&quot;: &quot;terminal-manager&quot;}]

Number of calls: 0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:403:50)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Backend Event Ingestion" name="should handle backend ingestion failure gracefully" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:430:30)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Backend Event Ingestion" name="should log locally if backend throws error" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:451:30)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Budget Deduction" name="should deduct actual usage when budget tracker enabled" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:480:30)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Budget Deduction" name="should use fallback estimates when actual usage not provided" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:496:30)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Budget Deduction" name="should handle budget deduction failure gracefully" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:511:30)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Metrics Tracking" name="should update task-metrics.json file" time="0">
      <failure>TypeError: fs.existsSync.mockReturnValue is not a function
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:522:21)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Metrics Tracking" name="should calculate success rate and averages" time="0.001">
      <failure>TypeError: fs.existsSync.mockReturnValue is not a function
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:552:21)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Metrics Tracking" name="should retrieve task metrics" time="0">
      <failure>TypeError: fs.existsSync.mockReturnValue is not a function
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:578:21)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; OpenTelemetry Integration" name="should create span with correct attributes" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;startSpan&apos;)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:606:30)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; OpenTelemetry Integration" name="should record exception on task error" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;startSpan&apos;)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:628:36)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Error Handling" name="should catch and log exceptions during execution" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;error&apos;)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:654:25)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Error Handling" name="should return error response with stack trace" time="0.001">
    </testcase>
    <testcase classname="Post-Task Hook &gt; Return Value Validation" name="should return complete success response" time="0.004">
      <failure>Error: expect(received).toMatchObject(expected)

- Expected  - 6
+ Received  + 1

  Object {
-   &quot;hookDuration&quot;: Any&lt;Number&gt;,
    &quot;span_id&quot;: Any&lt;String&gt;,
-   &quot;success&quot;: true,
-   &quot;taskResult&quot;: ObjectContaining {
-     &quot;status&quot;: &quot;completed&quot;,
-     &quot;taskId&quot;: &quot;task-return-1&quot;,
-   },
+   &quot;success&quot;: false,
    &quot;timestamp&quot;: Any&lt;String&gt;,
    &quot;trace_id&quot;: Any&lt;String&gt;,
  }
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:699:22)</failure>
    </testcase>
    <testcase classname="Post-Task Hook &gt; Return Value Validation" name="should include hook execution duration" time="0.001">
      <failure>Error: expect(received).toBeGreaterThanOrEqual(expected)

Matcher error: received value must be a number or bigint

Received has value: undefined
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task.test.js:720:35)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Bash Validator" errors="0" failures="32" skipped="0" timestamp="2025-11-19T23:46:17" time="0.217" tests="32">
    <testcase classname="Bash Validator &gt; Policy Loading" name="should load policy from YAML file" time="0.007">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Policy Loading" name="should throw error if policy file not found" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Policy Loading" name="should throw error if YAML is invalid" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Agent Overrides" name="should apply agent-specific policy override" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Agent Overrides" name="should merge allowed commands with agent overrides" time="0.001">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Agent Overrides" name="should use default policy for unknown agents" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Command Extraction" name="should extract base command name" time="0.001">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Command Extraction" name="should extract command before pipe" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Command Extraction" name="should extract command before semicolon" time="0.001">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Command Extraction" name="should handle command with leading/trailing whitespace" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Allowlist Checking" name="should allow exact command match" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Allowlist Checking" name="should allow base command match" time="0.001">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Allowlist Checking" name="should reject command not in allowlist" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Allowlist Checking" name="should match wildcard patterns" time="0.001">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Blocklist Checking" name="should block exact blocked command" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Blocklist Checking" name="should block command matching pattern" time="0.001">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Blocklist Checking" name="should allow command not in blocklist" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Blocklist Checking" name="should handle invalid regex patterns gracefully" time="0.001">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Validation" name="should validate allowed command" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Validation" name="should reject command exceeding max length" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Validation" name="should reject blocked command" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Validation" name="should reject command not in allowlist (strict mode)" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Validation" name="should allow any command in permissive mode (except blocked)" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Violation Tracking" name="should track violations" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Violation Tracking" name="should log violations to file when enabled" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Violation Tracking" name="should generate violation statistics" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Metrics Export" name="should export metrics to JSON file" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Metrics Export" name="should detect high violation rate" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Security Scenarios" name="should block dangerous rm -rf commands" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Security Scenarios" name="should block sudo privilege escalation" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Security Scenarios" name="should block chmod 777 commands" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Bash Validator &gt; Security Scenarios" name="should allow safe git commands" time="0">
      <failure>TypeError: BashValidator is not a constructor
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\bash-validator.test.js:147:17)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusHook (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:976:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:941:5)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Post-Edit Hook" errors="0" failures="19" skipped="0" timestamp="2025-11-19T23:46:17" time="0.192" tests="21">
    <testcase classname="Post-Edit Hook &gt; File Change Tracking" name="should calculate lines and bytes changed" time="0.015">
    </testcase>
    <testcase classname="Post-Edit Hook &gt; File Change Tracking" name="should track file size after edit" time="0.016">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;bytesAfter&apos;)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:190:30)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; File Change Tracking" name="should handle file creation (no previous stats)" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:206:30)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; File Change Tracking" name="should handle file deletion gracefully" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:223:30)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; File Hash Calculation" name="should calculate SHA-256 hash of file content" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;fileHash&apos;)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:241:30)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; File Hash Calculation" name="should handle missing file when calculating hash" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:254:30)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Memory MCP Storage" name="should store edit information with tagging protocol" time="0.002">
      <failure>Error: expect(jest.fn()).toHaveBeenCalled()

Expected number of calls: &gt;= 1
Received number of calls:    0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:279:52)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Memory MCP Storage" name="should handle missing memoryStore gracefully" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:302:30)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Backend Event Ingestion" name="should send edit event to backend API" time="0.002">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: ArrayContaining [ObjectContaining {&quot;agent_id&quot;: &quot;agent-003&quot;, &quot;agent_type&quot;: &quot;frontend-dev&quot;, &quot;event_type&quot;: &quot;file-edited&quot;, &quot;intent&quot;: &quot;refactor&quot;, &quot;project&quot;: &quot;terminal-manager&quot;}]

Number of calls: 0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:327:50)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Backend Event Ingestion" name="should handle backend ingestion failure gracefully" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:353:30)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Backend Event Ingestion" name="should log locally if backend throws error" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:371:30)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Metrics Tracking" name="should update edit-metrics.json file" time="0.001">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;edit-metrics.json&quot;, Any&lt;String&gt;, &quot;utf8&quot;

Number of calls: 0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:400:36)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Metrics Tracking" name="should track edits by file type" time="0">
      <failure>Error: expect(jest.fn()).toHaveBeenCalled()

Expected number of calls: &gt;= 1
Received number of calls:    0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:427:36)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Metrics Tracking" name="should track edits by agent" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;1&apos;)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:456:61)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Metrics Tracking" name="should retrieve edit metrics" time="0">
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Budget Deduction" name="should estimate tokens based on lines and bytes changed" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:500:30)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Budget Deduction" name="should use provided actual usage when available" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:516:30)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Correlation ID Propagation" name="should propagate correlation ID for related operations" time="0.001">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;post-edit-hook&quot;, StringContaining &quot;file-edit-&quot;

Number of calls: 0
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:534:48)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Error Handling" name="should catch and log exceptions during execution" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;error&apos;)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:559:25)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Return Value Validation" name="should return complete success response" time="0.005">
      <failure>Error: expect(received).toMatchObject(expected)

- Expected  - 9
+ Received  + 2

  Object {
-   &quot;editInfo&quot;: ObjectContaining {
-     &quot;bytesChanged&quot;: Any&lt;Number&gt;,
-     &quot;fileHash&quot;: Any&lt;String&gt;,
-     &quot;filePath&quot;: &quot;/test/complete.js&quot;,
-     &quot;linesChanged&quot;: Any&lt;Number&gt;,
-   },
-   &quot;hookDuration&quot;: Any&lt;Number&gt;,
    &quot;span_id&quot;: Any&lt;String&gt;,
-   &quot;success&quot;: true,
+   &quot;success&quot;: false,
    &quot;timestamp&quot;: Any&lt;String&gt;,
-   &quot;trace_id&quot;: Any&lt;String&gt;,
+   &quot;trace_id&quot;: undefined,
  }
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:584:22)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook &gt; Return Value Validation" name="should include hook execution duration" time="0.001">
      <failure>Error: expect(received).toBeGreaterThanOrEqual(expected)

Matcher error: received value must be a number or bigint

Received has value: undefined
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit.test.js:606:35)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Pre-Task Hook (Integration Tests with Real Code)" errors="0" failures="15" skipped="0" timestamp="2025-11-19T23:46:17" time="0.191" tests="27">
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Agent Auto-Assignment" name="should assign researcher agent for research tasks" time="0.002">
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Agent Auto-Assignment" name="should assign coder agent for code/implement tasks" time="0">
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Agent Auto-Assignment" name="should assign tester agent for test tasks" time="0.001">
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Agent Auto-Assignment" name="should assign reviewer agent for review tasks" time="0">
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Agent Auto-Assignment" name="should assign system-architect agent for plan/design tasks" time="0">
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Agent Auto-Assignment" name="should fall back to coder for unknown task types" time="0.001">
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Agent Auto-Assignment" name="should handle empty description" time="0">
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Agent Auto-Assignment" name="should handle null description" time="0.001">
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Agent Auto-Assignment" name="should handle case-insensitive matching" time="0">
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Budget Validation" name="should allow task when budget is available" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:188:42)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Budget Validation" name="should block task when budget is exceeded" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:207:42)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Budget Validation" name="should handle missing budget tracker gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:219:42)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Correlation ID Management" name="should generate correlation ID for task" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:236:42)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Correlation ID Management" name="should use prefixed format for correlation IDs" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:247:42)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Memory MCP Integration" name="should store task start event in Memory MCP" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:269:42)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Memory MCP Integration" name="should include WHO/WHEN/PROJECT/WHY metadata" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:286:27)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Backend API Integration" name="should send task start event to backend" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:309:27)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Backend API Integration" name="should handle backend API failure gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:323:42)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; OpenTelemetry Tracing" name="should create span for task execution" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:341:27)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; OpenTelemetry Tracing" name="should add task attributes to span" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:357:27)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Error Handling" name="should handle missing context gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:369:42)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Error Handling" name="should handle empty context" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:375:42)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Integration Scenarios" name="should execute complete pre-task flow" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:399:42)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Hook (Integration Tests with Real Code) &gt; Integration Scenarios" name="should assign correct agent based on task description" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as preTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\pre-task.js:155:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\pre-task-real.test.js:414:42)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Pre-Task Helper Functions" name="TASK_TYPE_TO_AGENT mapping should be comprehensive" time="0.001">
    </testcase>
    <testcase classname="Pre-Task Helper Functions" name="should export autoAssignAgent function" time="0">
    </testcase>
    <testcase classname="Pre-Task Helper Functions" name="should export preTaskHook function" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Post-Task Hook (Integration Tests with Real Code)" errors="0" failures="29" skipped="0" timestamp="2025-11-19T23:46:17" time="0.219" tests="33">
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Correlation ID Continuity" name="should retrieve correlation ID from pre-task hook" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:171:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Correlation ID Continuity" name="should propagate correlation ID to next task" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:186:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Correlation ID Continuity" name="should use prefixed format for correlation IDs" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:200:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Correlation ID Continuity" name="should create new correlation ID if pre-task ID missing" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:214:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Task Result Processing" name="should process completed task successfully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:237:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Task Result Processing" name="should process failed task with error details" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:258:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Task Result Processing" name="should calculate task duration correctly" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:274:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Task Result Processing" name="should track files modified during task" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:287:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Memory MCP Storage" name="should store task results with WHO/WHEN/PROJECT/WHY metadata" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:312:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Memory MCP Storage" name="should include task metadata in memory storage" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:336:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Memory MCP Storage" name="should handle missing memory store gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:350:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Backend Event Ingestion" name="should send task completion event to backend" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:370:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Backend Event Ingestion" name="should include proper payload in backend request" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:388:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Backend Event Ingestion" name="should handle backend API failure gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:411:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Budget Deduction" name="should deduct actual token usage from budget" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:434:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Budget Deduction" name="should use fallback estimates if actual usage unavailable" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:454:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Budget Deduction" name="should handle budget deduction failure gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:474:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Metrics Tracking" name="should update task metrics file" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:495:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Metrics Tracking" name="should track successful task count" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:516:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Metrics Tracking" name="should track failed task count" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:538:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; OpenTelemetry Tracing" name="should create span for post-task execution" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:557:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; OpenTelemetry Tracing" name="should add task result attributes to span" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:575:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Error Handling" name="should handle missing context gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:588:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Error Handling" name="should handle empty context" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:594:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Return Value Validation" name="should return proper structure on success" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:613:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Return Value Validation" name="should return proper structure on error" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:633:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Integration Scenarios" name="should execute complete post-task flow for successful task" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:664:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Integration Scenarios" name="should execute complete post-task flow for failed task" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:690:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Hook (Integration Tests with Real Code) &gt; Integration Scenarios" name="should handle unknown status gracefully" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as postTaskHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-task.hook.js:67:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-task-real.test.js:705:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Task Helper Functions" name="should export postTaskHook function" time="0.001">
    </testcase>
    <testcase classname="Post-Task Helper Functions" name="should export getTaskMetrics function" time="0">
    </testcase>
    <testcase classname="Post-Task Helper Functions" name="getTaskMetrics should return null if metrics file does not exist" time="0">
    </testcase>
    <testcase classname="Post-Task Helper Functions" name="getTaskMetrics should return parsed metrics if file exists" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Post-Edit Hook (Integration Tests with Real Code)" errors="0" failures="21" skipped="0" timestamp="2025-11-19T23:46:18" time="0.481" tests="25">
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; File Change Tracking" name="should calculate lines changed correctly (increase)" time="0.007">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:151:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; File Change Tracking" name="should calculate lines changed correctly (decrease)" time="0.001">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:168:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; File Change Tracking" name="should calculate bytes changed correctly" time="0.001">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:187:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; File Change Tracking" name="should handle zero changes gracefully" time="0">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:207:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; File Hash Calculation" name="should calculate SHA-256 hash for file integrity" time="0">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:231:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; File Hash Calculation" name="should handle missing file gracefully (no hash)" time="0.001">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:252:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Memory MCP Storage" name="should store edit event in Memory MCP with metadata" time="0.001">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:278:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Memory MCP Storage" name="should include file path and agent context in memory" time="0.001">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:307:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Backend Event Ingestion" name="should send edit event to backend API" time="0.001">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:338:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Backend Event Ingestion" name="should handle backend API failure gracefully" time="0">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:357:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Backend Event Ingestion" name="should include trace_id in backend event" time="0">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:375:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Metrics Tracking" name="should track edits by file type (.js)" time="0">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:399:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Metrics Tracking" name="should track edits by agent ID" time="0">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:431:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Metrics Tracking" name="should accumulate total edits count" time="0">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:460:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Metrics Tracking" name="should handle missing metrics file (create new)" time="0">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:485:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Budget Deduction" name="should estimate cost based on lines and bytes changed" time="0">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:508:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Budget Deduction" name="should deduct actual cost from budget tracker" time="0">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:528:28)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Correlation ID Propagation" name="should maintain correlation ID across edit operations" time="0.001">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:556:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Error Handling" name="should handle missing file gracefully" time="0.001">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:587:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Return Value Validation" name="should return complete edit info structure" time="0.001">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:610:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Hook (Integration Tests with Real Code) &gt; Return Value Validation" name="should include all required fields on success" time="0.001">
      <failure>TypeError: crypto.randomBytes is not a function
    at CorrelationIdManager.randomBytes [as generateShortId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:51:19)
    at CorrelationIdManager.generateShortId [as generatePrefixedId] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:58:26)
    at CorrelationIdManager.generatePrefixedId [as generate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:74:21)
    at CorrelationIdManager.generate [as getOrCreate] (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:98:21)
    at getOrCreate (C:\Users\17175\terminal-manager\hooks\12fa\correlation-id-manager.js:327:23)
    at Object.getOrCreate [as postEditHook] (C:\Users\17175\terminal-manager\hooks\12fa\post-edit.hook.js:49:25)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\post-edit-real.test.js:638:43)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Post-Edit Helper Functions" name="should export postEditHook function" time="0.001">
    </testcase>
    <testcase classname="Post-Edit Helper Functions" name="should export getEditMetrics function" time="0.001">
    </testcase>
    <testcase classname="Post-Edit Helper Functions" name="getEditMetrics should return null when no metrics file exists" time="0">
    </testcase>
    <testcase classname="Post-Edit Helper Functions" name="getEditMetrics should return parsed metrics when file exists" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Session-End Hook (Integration Tests with Real Code)" errors="0" failures="19" skipped="0" timestamp="2025-11-19T23:46:18" time="0.282" tests="24">
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Session Cleanup" name="should clear temporary data on session end" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:162:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Session Cleanup" name="should close OpenTelemetry connections properly" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:175:30)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Session Cleanup" name="should handle cleanup errors gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:191:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Final Budget Reconciliation" name="should calculate total spend from budget tracker" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:214:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Final Budget Reconciliation" name="should verify no budget overages" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:232:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Final Budget Reconciliation" name="should handle budget tracker unavailability" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:248:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Metrics Export" name="should export session-metrics.json with aggregated data" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:282:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Metrics Export" name="should aggregate metrics from multiple sources" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:319:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Correlation ID Cleanup" name="should clean up correlation tracking data" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:349:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Correlation ID Cleanup" name="should export correlation statistics" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:368:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Session Summary Generation" name="should generate human-readable session summary" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:391:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Session Summary Generation" name="should include all required summary fields" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:411:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Memory MCP Integration" name="should store session summary in Memory MCP" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:453:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Memory MCP Integration" name="should include WHO/WHEN/PROJECT/WHY metadata" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:474:30)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Backend API Integration" name="should send session summary to backend" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:499:30)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Backend API Integration" name="should handle backend API failure gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:524:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Error Handling" name="should handle missing context gracefully" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:537:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Error Handling" name="should handle empty context" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:543:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Hook (Integration Tests with Real Code) &gt; Error Handling" name="should handle metrics file read errors" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;spanId&apos;)
    at Object.spanId [as sessionEndHook] (C:\Users\17175\terminal-manager\hooks\12fa\session-end.hook.js:50:19)
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\session-end-real.test.js:558:45)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Session-End Helper Functions" name="should export getSessionSummary function" time="0.001">
    </testcase>
    <testcase classname="Session-End Helper Functions" name="should export listSessionSummaries function" time="0">
    </testcase>
    <testcase classname="Session-End Helper Functions" name="getSessionSummary should return null for non-existent session" time="0">
    </testcase>
    <testcase classname="Session-End Helper Functions" name="listSessionSummaries should return empty array when no sessions" time="0.001">
    </testcase>
    <testcase classname="Session-End Helper Functions" name="listSessionSummaries should parse and sort sessions" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Memory MCP Tagging Protocol (Integration Tests with Real Code)" errors="0" failures="3" skipped="0" timestamp="2025-11-19T23:46:19" time="0.168" tests="40">
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; WHO Metadata Injection" name="should inject agent name from parameter" time="0.02">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; WHO Metadata Injection" name="should inject agent category from AGENT_TOOL_ACCESS" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; WHO Metadata Injection" name="should inject agent capabilities from AGENT_TOOL_ACCESS" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; WHO Metadata Injection" name="should use default category for unknown agent" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; WHEN Timestamp Formatting" name="should generate ISO8601 timestamp" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; WHEN Timestamp Formatting" name="should generate Unix timestamp" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; WHEN Timestamp Formatting" name="should generate human-readable timestamp" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; PROJECT Detection Logic" name="should detect terminal-manager from current working directory" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; PROJECT Detection Logic" name="should detect connascence-analyzer from cwd" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; PROJECT Detection Logic" name="should detect memory-mcp from cwd" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; PROJECT Detection Logic" name="should detect claude-flow from cwd" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; PROJECT Detection Logic" name="should detect project from content when cwd is unknown" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; WHY Intent Classification" name="should classify implementation intent" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; WHY Intent Classification" name="should classify bugfix intent" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; WHY Intent Classification" name="should classify refactor intent" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; WHY Intent Classification" name="should classify testing intent" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;testing&quot;
Received: &quot;implementation&quot;
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\memory-mcp-tagging-protocol-real.test.js:219:22)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Metadata Integration" name="should integrate all WHO/WHEN/PROJECT/WHY metadata" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Metadata Integration" name="should auto-detect intent when not provided" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Metadata Integration" name="should auto-detect project from cwd when not provided" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Metadata Integration" name="should preserve user metadata while adding enriched metadata" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Agent Reality Map V2.0 Features" name="should include IDENTITY metadata when registry available" time="0.004">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Agent Reality Map V2.0 Features" name="should include BUDGET metadata when budget tracker available" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Agent Reality Map V2.0 Features" name="should include QUALITY metadata when provided in context" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 85
Received: undefined
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\memory-mcp-tagging-protocol-real.test.js:340:57)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Agent Reality Map V2.0 Features" name="should include ARTIFACTS metadata from context" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Agent Reality Map V2.0 Features" name="should include PERFORMANCE metadata from context" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Utility Functions" name="should validate agent access to Memory MCP" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Utility Functions" name="should deny agent access to unavailable MCP" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Utility Functions" name="should batch multiple writes with tagging" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Utility Functions" name="should generate MCP tool call with tagging" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Hook Integration" name="should auto-tag on hook event" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;refactor&quot;
Received: &quot;general&quot;
    at Object.&lt;anonymous&gt; (C:\Users\17175\terminal-manager\hooks\12fa\__tests__\memory-mcp-tagging-protocol-real.test.js:439:38)
    at Promise.finally.completed (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
    at _callCircusTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
    at _runTest (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
    at C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:849:7
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at _runTestsForDescribeBlock (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
    at run (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
    at runAndTransformResultsToJestFormat (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
    at jestAdapter (C:\Users\17175\terminal-manager\node_modules\jest-circus\build\runner.js:101:19)
    at runTestInternal (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:275:16)
    at runTest (C:\Users\17175\terminal-manager\node_modules\jest-runner\build\index.js:343:7)</failure>
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Edge Cases" name="should handle null agent gracefully" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Edge Cases" name="should handle empty content" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol (Integration Tests with Real Code) &gt; Edge Cases" name="should handle non-string content by converting to JSON" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol Helper Functions" name="should export IntentAnalyzer class" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol Helper Functions" name="should export intentAnalyzer instance" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol Helper Functions" name="should export detectProject function" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol Helper Functions" name="should export taggedMemoryStore function" time="0">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol Helper Functions" name="should export taggedMemoryStoreV2 function" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol Helper Functions" name="should export AGENT_TOOL_ACCESS mapping" time="0.001">
    </testcase>
    <testcase classname="Memory MCP Tagging Protocol Helper Functions" name="should export MEMORY_NAMESPACES for Agent Reality Map" time="0.001">
    </testcase>
  </testsuite>
</testsuites>